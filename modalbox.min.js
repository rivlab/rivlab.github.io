function checkElementAndAddListener() {
  if (document.querySelector(".card_research")) {
    let e = document.querySelectorAll(".card_research"),
      t = document.getElementById("modal"),
      l = document.getElementById("textBib"),
      r = document.getElementById("headr-id-modal"),
      d = document.querySelector(".lds-ring");
    e.forEach((e) => {
      e.querySelector(".show-modal").addEventListener("click", function (i) {
        i.preventDefault();
        let n = e.getAttribute("data-id");
        (t.style.display = "block"),
          (d.style.display = "block"),
          fetch(`./${n}`)
            .then((e) => e.json())
            .then((e) => {
              let tex = "";
              for (const [key, value] of Object.entries(e.data)) {
                if (key.includes("@")) {
                  tex +=
                    `<span style="color:#cf222e">${key}</span>` +
                    "{" +
                    `<span style="color:#6639ba">${value}</span>` +
                    ",\n";
                } else {
                  tex +=
                    "\t" +
                    `<span style="color:#0a3069">${key}</span>` +
                    " = " +
                    `<span style="color:#0a3069">{${value}}</span>` +
                    ",\n";
                }
              }
              tex += "  }";

              e.data &&
                ((r.innerHTML = `<h3 class="header-text-modal">${e.data.title}</h3>
         
                `),
                (l.innerHTML = `
            <pre   class="value_modal">  ${tex} </pre>
          `)),
                (d.style.display = "none");
            })
            .catch((e) => {
              (d.style.display = "none"),
                console.error("Error fetching data:", e);
            });
      });
    }),
      t.querySelector(".close-modal").addEventListener("click", function () {
        t.style.display = "none";
      }),
      window.addEventListener("click", function (e) {
        e.target == t && (t.style.display = "none");
      });
    let i = document.querySelector(".riv"),
      n = document.querySelector(".first_view"),
      s = (i.offsetHeight - n.offsetHeight) / 7,
      o = (i.offsetHeight - n.offsetHeight) / 7,
      a = Math.floor(11 * Math.random()) + 10;
    for (let c = 0; c < 6; c++) {
      let y = o * (c + 1) - 250 + n.offsetHeight,
        f = document.createElement("div");
      f.classList.add("circle1"),
        (size1 = Math.floor(Math.random() * (a + 13 - a + 3 + 1)) + a + 3),
        (f.style.width = size1 + "%"),
        (f.style.right = -a + "%"),
        (f.style.top = y + "px"),
        i.appendChild(f);
    }
    for (let h = 0; h < 6; h++) {
      let p = s * (h + 1) - 175 + n.offsetHeight,
        m = document.createElement("div");
      m.classList.add("circle"),
        (size = Math.floor(Math.random() * (a + 13 - a + 3 + 1)) + a + 3),
        (m.style.width = size + "%"),
        (m.style.left = -a + "%"),
        (m.style.top = p + "px"),
        i.appendChild(m);
    }
  } else setTimeout(checkElementAndAddListener, 1e3);
}

checkElementAndAddListener();
async function copyContent() {
  try {
    text = document.querySelector(".value_modal").textContent;
    console.log(text);
    const tooltip = document.getElementById("tooltip");
    tooltip.classList.add("activeCopy");

    setTimeout(function () {
      tooltip.classList.remove("activeCopy");
    }, 2000);
    await navigator.clipboard.writeText(text);
    console.log("Content copied to clipboard");
  } catch (err) {
    console.error("Failed to copy: ", err);
  }
}
