function checkElementAndAddListener() {
  const element = document.querySelector(".card_research");
  if (element) {
    const elements = document.querySelectorAll(".card_research");
    const modal = document.getElementById("modal");
    const modalContent = document.getElementById("modal-details");
    const modalHeader = document.getElementById("headr-id-modal");
    elements.forEach((element) => {
      element
        .querySelector(".show-modal")
        .addEventListener("click", function (e) {
          e.preventDefault();
          const elementId = element.getAttribute("data-id");
          fetch(`./${elementId}`)
            .then((response) => response.json())
            .then((data) => {
              // data.bibTex = data.bibTex.replaceAll("\n", "<br> &emsp");
              let title = data.bibTex
                .split("\n\t")[1]
                .replaceAll("title={", "")
                .replaceAll("},", "");
              if (data.bibTex) {
                modalHeader.innerHTML = `<h3 class="header-text-modal">${title}</h3>
         
                `;
                modalContent.innerHTML = `
            <pre class="value_modal">${data.bibTex}</pre>
          `;
                modal.style.display = "block";
              }
            })
            .catch((error) => console.error("Error fetching data:", error));
        });
    });
    modal.querySelector(".close-modal").addEventListener("click", function () {
      modal.style.display = "none";
    });

    window.addEventListener("click", function (e) {
      if (e.target == modal) {
        modal.style.display = "none";
      }
    });

    const container = document.querySelector(".riv");
    const first_view = document.querySelector(".first_view");
    const numCircles = 6;
    const numCircles1 = 6;
    const circleSize = 350;
    const circleSize1 = 500;
    const verticalSpacing =
      (container.offsetHeight - first_view.offsetHeight) / (numCircles + 1);
    const verticalSpacing1 =
      (container.offsetHeight - first_view.offsetHeight) / (numCircles1 + 1);
    const rightLeft = Math.floor(Math.random() * (20 - 10 + 1)) + 10;

    for (let i = 0; i < numCircles1; i++) {
      const top1 =
        verticalSpacing1 * (i + 1) - circleSize1 / 2 + first_view.offsetHeight;
      const circle1 = document.createElement("div");
      circle1.classList.add("circle1");
      size1 =
        Math.floor(Math.random() * (rightLeft + 13 - rightLeft + 3 + 1)) +
        rightLeft +
        3;
      circle1.style.width = size1 + "%";
      circle1.style.right = -rightLeft + "%";
      circle1.style.top = top1 + "px";
      container.appendChild(circle1);
    }
    for (let i = 0; i < numCircles; i++) {
      // const size =
      //   Math.floor(Math.random() * (maxSize - minSize + 1)) + minSize;
      // const left = Math.random() * (container.offsetWidth - size);
      const top =
        verticalSpacing * (i + 1) - circleSize / 2 + first_view.offsetHeight;

      const circle = document.createElement("div");
      circle.classList.add("circle");

      size =
        Math.floor(Math.random() * (rightLeft + 13 - rightLeft + 3 + 1)) +
        rightLeft +
        3;
      circle.style.width = size + "%";
      circle.style.left = -rightLeft + "%";
      circle.style.top = top + "px";
      container.appendChild(circle);
    }
  } else {
    setTimeout(checkElementAndAddListener, 1000);
  }
}

checkElementAndAddListener();
